# Obfuscated by Mr.X
import base64
exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCB3ZWJicm93c2VyCmltcG9ydCBzb2NrZXRzZXJ2ZXIKaW1wb3J0IHB5ZmlnbGV0CmltcG9ydCB0aW1lCmltcG9ydCByZXF1ZXN0cwpmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgQ29uc29sZQpmcm9tIHJpY2gucGFuZWwgaW1wb3J0IFBhbmVsCmZyb20gcmljaC5wcm9ncmVzcyBpbXBvcnQgUHJvZ3Jlc3MsIFNwaW5uZXJDb2x1bW4sIFRleHRDb2x1bW4KZnJvbSByaWNoIGltcG9ydCBib3gKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQpmcm9tIHJpY2gubGF5b3V0IGltcG9ydCBMYXlvdXQKZnJvbSByaWNoLmxpdmUgaW1wb3J0IExpdmUKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHBzdXRpbApmcm9tIGh0dHAuc2VydmVyIGltcG9ydCBTaW1wbGVIVFRQUmVxdWVzdEhhbmRsZXIKaW1wb3J0IHNpZ25hbAppbXBvcnQganNvbgoKY2xhc3MgVGVtcE1haWxWaWV3ZXI6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5jb25zb2xlID0gQ29uc29sZSgpCiAgICAgICAgc2VsZi5BUElfQkFTRSA9ICJodHRwczovL2FwaS5tYWlsLnRtIgogICAgICAgIHNlbGYuZW1haWwgPSBOb25lCiAgICAgICAgc2VsZi50b2tlbiA9IE5vbmUKICAgICAgICBzZWxmLnNlZW5faWRzID0gc2V0KCkKICAgICAgICBzZWxmLmxheW91dCA9IExheW91dCgpCiAgICAgICAgc2VsZi5odHRwZCA9IE5vbmUKCiAgICBkZWYgY2xlYXJfc2NyZWVuKHNlbGYpOgogICAgICAgIG9zLnN5c3RlbSgiY2xzIiBpZiBvcy5uYW1lID09ICJudCIgZWxzZSAiY2xlYXIiKQoKICAgIGRlZiBkaXNwbGF5X2Jhbm5lcihzZWxmKToKICAgICAgICBmaWdsZXRfYmFubmVyID0gcHlmaWdsZXQuZmlnbGV0X2Zvcm1hdCgiIFhUZW1wbWFpbCIsIGZvbnQ9InNsYW50IikKICAgICAgICBmdWxsX2Jhbm5lciA9IGZpZ2xldF9iYW5uZXIgKyAiXG4gIFVubGltaXRlZCBlbWFpbCBmb3IgeW91LCBjb2RlIGJ5IE1yLlgiCiAgICAgICAgc2VsZi5jb25zb2xlLnByaW50KFBhbmVsKGZ1bGxfYmFubmVyLCBzdHlsZT0iYm9sZCBjeWFuIiwgZXhwYW5kPVRydWUsIHBhZGRpbmc9KDAsIDIpLCBib3g9Ym94LlJPVU5ERUQpKQoKICAgIGRlZiBjcmVhdGVfaW5ib3hfdGFibGUoc2VsZiwgbWVzc2FnZXMpOgogICAgICAgIHRhYmxlID0gVGFibGUoCiAgICAgICAgICAgIHRpdGxlPSJJbmJveCIsCiAgICAgICAgICAgIGJveD1ib3guUk9VTkRFRCwKICAgICAgICAgICAgc2hvd19oZWFkZXI9VHJ1ZSwKICAgICAgICAgICAgaGVhZGVyX3N0eWxlPSJib2xkIGN5YW4iLAogICAgICAgICAgICBleHBhbmQ9VHJ1ZQogICAgICAgICkKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJJRCIsIHN0eWxlPSJkaW0iLCB3aWR0aD02KQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIkZyb20iLCBzdHlsZT0iYnJpZ2h0X2JsdWUiKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlN1YmplY3QiLCBzdHlsZT0iYnJpZ2h0X2dyZWVuIikKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJEYXRlIiwgc3R5bGU9InllbGxvdyIpCgogICAgICAgIGZvciBtc2cgaW4gbWVzc2FnZXM6CiAgICAgICAgICAgIGRhdGUgPSBkYXRldGltZS5mcm9taXNvZm9ybWF0KG1zZ1snY3JlYXRlZEF0J10ucnN0cmlwKCJaIikpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTScpCiAgICAgICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgICAgICBtc2dbJ2lkJ11bOjZdLAogICAgICAgICAgICAgICAgbXNnLmdldCgnZnJvbScsIHt9KS5nZXQoJ2FkZHJlc3MnLCAndW5rbm93bicpLAogICAgICAgICAgICAgICAgbXNnLmdldCgnc3ViamVjdCcsICdbTm8gU3ViamVjdF0nKSwKICAgICAgICAgICAgICAgIGRhdGUKICAgICAgICAgICAgKQogICAgICAgIHJldHVybiB0YWJsZQoKICAgIGRlZiBmb3JtYXRfaHRtbF9jb250ZW50KHNlbGYsIGh0bWxfY29udGVudCk6CiAgICAgICAgc3R5bGVkX2h0bWwgPSBmIiIiCiAgICAgICAgPCFET0NUWVBFIGh0bWw+CiAgICAgICAgPGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgYm9keSB7eyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IG1hcmdpbjogMjBweDsgY29sb3I6ICMzMzM7IH19CiAgICAgICAgICAgICAgICAuZW1haWwtY29udGFpbmVyIHt7IG1heC13aWR0aDogODAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IH19CiAgICAgICAgICAgICAgICAuZW1haWwtaGVhZGVyIHt7IGJhY2tncm91bmQ6ICNmNWY1ZjU7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlci1yYWRpdXM6IDNweDsgfX0KICAgICAgICAgICAgICAgIC5lbWFpbC1ib2R5IHt7IHBhZGRpbmc6IDEwcHg7IH19CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgPC9oZWFkPgogICAgICAgIDxib2R5PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJlbWFpbC1jb250YWluZXIiPntodG1sX2NvbnRlbnR9PC9kaXY+CiAgICAgICAgPC9ib2R5PgogICAgICAgIDwvaHRtbD4KICAgICAgICAiIiIKICAgICAgICByZXR1cm4gc3R5bGVkX2h0bWwKCiAgICBkZWYgZGlzcGxheV9lbWFpbChzZWxmLCBtZXNzYWdlKToKICAgICAgICBpZiBub3QgbWVzc2FnZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGhlYWRlcl90YWJsZSA9IFRhYmxlKHNob3dfaGVhZGVyPUZhbHNlLCBib3g9Ym94LlJPVU5ERUQsIGV4cGFuZD1UcnVlLCB0aXRsZT0iRW1haWwgRGV0YWlscyIsIHRpdGxlX3N0eWxlPSJib2xkIGN5YW4iKQogICAgICAgIGhlYWRlcl90YWJsZS5hZGRfY29sdW1uKCJGaWVsZCIsIHN0eWxlPSJib2xkIGN5YW4iLCB3aWR0aD0xMCkKICAgICAgICBoZWFkZXJfdGFibGUuYWRkX2NvbHVtbigiVmFsdWUiLCBzdHlsZT0iYnJpZ2h0X3doaXRlIikKICAgICAgICBoZWFkZXJfdGFibGUuYWRkX3JvdygiRnJvbSIsIG1lc3NhZ2UuZ2V0KCdmcm9tJywge30pLmdldCgnYWRkcmVzcycsICdOL0EnKSkKICAgICAgICBoZWFkZXJfdGFibGUuYWRkX3JvdygiRGF0ZSIsIG1lc3NhZ2UuZ2V0KCdjcmVhdGVkQXQnLCAnTi9BJykpCiAgICAgICAgaGVhZGVyX3RhYmxlLmFkZF9yb3coIlN1YmplY3QiLCBtZXNzYWdlLmdldCgnc3ViamVjdCcsICdbTm8gU3ViamVjdF0nKSkKICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoaGVhZGVyX3RhYmxlKQoKICAgICAgICBib2R5ID0gbWVzc2FnZS5nZXQoJ3RleHQnLCAnJykgb3IgbWVzc2FnZS5nZXQoJ2h0bWwnLCAnJykKICAgICAgICBpZiAnPCcgaW4gYm9keSBhbmQgJz4nIGluIGJvZHk6ICAjIGFzc3VtZSBIVE1MCiAgICAgICAgICAgIGh0bWxfZmlsZSA9ICJlbWFpbF9jb250ZW50Lmh0bWwiCiAgICAgICAgICAgIHN0eWxlZCA9IHNlbGYuZm9ybWF0X2h0bWxfY29udGVudChib2R5KQogICAgICAgICAgICB3aXRoIG9wZW4oaHRtbF9maWxlLCAidyIsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGY6CiAgICAgICAgICAgICAgICBmLndyaXRlKHN0eWxlZCkKICAgICAgICAgICAgc2VsZi5jb25zb2xlLnByaW50KFBhbmVsKCJbYm9sZCBjeWFuXU9wZW5pbmcgSFRNTCBjb250ZW50IGluIGJyb3dzZXIuLi5bL2JvbGQgY3lhbl0iLCBzdHlsZT0iY3lhbiIsIGJveD1ib3guUk9VTkRFRCkpCiAgICAgICAgICAgIHNlbGYuc3RhcnRfbG9jYWxfc2VydmVyKGh0bWxfZmlsZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoUGFuZWwoYm9keSBvciAiW05vIENvbnRlbnRdIiwgdGl0bGU9Ik1lc3NhZ2UgQ29udGVudCIsIHN0eWxlPSJicmlnaHRfd2hpdGUiLCBib3g9Ym94LlJPVU5ERUQpKQoKICAgIGRlZiBnZXRfZG9tYWlucyhzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJ7c2VsZi5BUElfQkFTRX0vZG9tYWlucyIpCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgZGF0YSA9IHIuanNvbigpCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVsnaHlkcmE6bWVtYmVyJ11bMF1bJ2RvbWFpbiddCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoZiJbYm9sZCByZWRdRXJyb3IgZmV0Y2hpbmcgZG9tYWluOiB7ZX1bL2JvbGQgcmVkXSIpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgY3JlYXRlX2FjY291bnQoc2VsZik6CiAgICAgICAgZG9tYWluID0gc2VsZi5nZXRfZG9tYWlucygpCiAgICAgICAgaWYgbm90IGRvbWFpbjoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgICMgR3VuYWthbiB1c2VybmFtZSBhY2FrCiAgICAgICAgaW1wb3J0IHJhbmRvbSwgc3RyaW5nCiAgICAgICAgdXNlcm5hbWUgPSAnJy5qb2luKHJhbmRvbS5jaG9pY2VzKHN0cmluZy5hc2NpaV9sb3dlcmNhc2UgKyBzdHJpbmcuZGlnaXRzLCBrPTEyKSkKICAgICAgICBlbWFpbCA9IGYie3VzZXJuYW1lfUB7ZG9tYWlufSIKCiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMucG9zdChmIntzZWxmLkFQSV9CQVNFfS9hY2NvdW50cyIsIGpzb249eyJhZGRyZXNzIjogZW1haWwsICJwYXNzd29yZCI6ICJ0ZW1wMTIzIn0pCiAgICAgICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgaW4gKDIwMCwgMjAxKToKICAgICAgICAgICAgICAgICMgRGFwYXRrYW4gdG9rZW4KICAgICAgICAgICAgICAgIGxvZ2luID0gcmVxdWVzdHMucG9zdChmIntzZWxmLkFQSV9CQVNFfS90b2tlbiIsIGpzb249eyJhZGRyZXNzIjogZW1haWwsICJwYXNzd29yZCI6ICJ0ZW1wMTIzIn0pCiAgICAgICAgICAgICAgICBpZiBsb2dpbi5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICAgICAgc2VsZi50b2tlbiA9IGxvZ2luLmpzb24oKVsndG9rZW4nXQogICAgICAgICAgICAgICAgICAgIHNlbGYuZW1haWwgPSBlbWFpbAogICAgICAgICAgICAgICAgICAgIHNlbGYuY29uc29sZS5wcmludChQYW5lbChmIltib2xkIGdyZWVuXUVtYWlsIEFkZHJlc3M6Wy9ib2xkIGdyZWVuXSB7c2VsZi5lbWFpbH0iLCB0aXRsZT0iRW1haWwgR2VuZXJhdGVkIFN1Y2Nlc3NmdWxseSIsIHN0eWxlPSJncmVlbiIsIGJveD1ib3guUk9VTkRFRCkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29uc29sZS5wcmludChmIltib2xkIHJlZF1BY2NvdW50IGNyZWF0aW9uIGVycm9yOiB7ZX1bL2JvbGQgcmVkXSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGNoZWNrX2luYm94KHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLnRva2VuOgogICAgICAgICAgICByZXR1cm4gW10KICAgICAgICB0cnk6CiAgICAgICAgICAgIGhlYWRlcnMgPSB7IkF1dGhvcml6YXRpb24iOiBmIkJlYXJlciB7c2VsZi50b2tlbn0ifQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KGYie3NlbGYuQVBJX0JBU0V9L21lc3NhZ2VzIiwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIHJldHVybiByLmpzb24oKVsnaHlkcmE6bWVtYmVyJ10KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29uc29sZS5wcmludChmIltib2xkIHJlZF1JbmJveCBlcnJvcjoge2V9Wy9ib2xkIHJlZF0iKQogICAgICAgIHJldHVybiBbXQoKICAgIGRlZiByZWFkX2VtYWlsKHNlbGYsIG1lc3NhZ2VfaWQpOgogICAgICAgIGlmIG5vdCBzZWxmLnRva2VuOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIHRyeToKICAgICAgICAgICAgaGVhZGVycyA9IHsiQXV0aG9yaXphdGlvbiI6IGYiQmVhcmVyIHtzZWxmLnRva2VufSJ9CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoZiJ7c2VsZi5BUElfQkFTRX0vbWVzc2FnZXMve21lc3NhZ2VfaWR9IiwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgICAgIHJldHVybiByLmpzb24oKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgc2VsZi5jb25zb2xlLnByaW50KGYiW2JvbGQgcmVkXVJlYWQgZW1haWwgZXJyb3I6IHtlfVsvYm9sZCByZWRdIikKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBraWxsX3BvcnQoc2VsZiwgcG9ydCk6CiAgICAgICAgZm9yIHByb2MgaW4gcHN1dGlsLnByb2Nlc3NfaXRlcihbJ3BpZCcsICduYW1lJ10pOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBmb3IgY29ubiBpbiBwcm9jLm5ldF9jb25uZWN0aW9ucyhraW5kPSdpbmV0Jyk6CiAgICAgICAgICAgICAgICAgICAgaWYgY29ubi5sYWRkci5wb3J0ID09IHBvcnQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Mua2lsbCgpCiAgICAgICAgICAgIGV4Y2VwdCAocHN1dGlsLk5vU3VjaFByb2Nlc3MsIHBzdXRpbC5BY2Nlc3NEZW5pZWQsIHBzdXRpbC5ab21iaWVQcm9jZXNzKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgZGVmIHN0YXJ0X2xvY2FsX3NlcnZlcihzZWxmLCBodG1sX2ZpbGUpOgogICAgICAgIGh0bWxfZmlsZV9wYXRoID0gb3MucGF0aC5hYnNwYXRoKGh0bWxfZmlsZSkKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoaHRtbF9maWxlX3BhdGgpOgogICAgICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoZiJbYm9sZCByZWRdRXJyb3I6IEZpbGUge2h0bWxfZmlsZX0gdGlkYWsgZGl0ZW11a2FuIVsvYm9sZCByZWRdIikKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYua2lsbF9wb3J0KDgwODApCiAgICAgICAgb3MuY2hkaXIob3MucGF0aC5kaXJuYW1lKGh0bWxfZmlsZV9wYXRoKSkKCiAgICAgICAgY2xhc3MgU2lsZW50SGFuZGxlcihTaW1wbGVIVFRQUmVxdWVzdEhhbmRsZXIpOgogICAgICAgICAgICBkZWYgbG9nX21lc3NhZ2Uoc2VsZiwgZm9ybWF0LCAqYXJncyk6IHBhc3MKCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3aXRoIHNvY2tldHNlcnZlci5UQ1BTZXJ2ZXIoKCIiLCA4MDgwKSwgU2lsZW50SGFuZGxlcikgYXMgaHR0cGQ6CiAgICAgICAgICAgICAgICB3ZWJicm93c2VyLm9wZW4oZiJodHRwOi8vbG9jYWxob3N0OjgwODAve29zLnBhdGguYmFzZW5hbWUoaHRtbF9maWxlX3BhdGgpfSIpCiAgICAgICAgICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgICAgICAgICAgICAgZiJbYm9sZCBjeWFuXVZpZXcgSFRNTCBlbWFpbCBhdDogW3llbGxvd11odHRwOi8vbG9jYWxob3N0OjgwODAve29zLnBhdGguYmFzZW5hbWUoaHRtbF9maWxlX3BhdGgpfVsveWVsbG93XSIsCiAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJvbGQgY3lhbiIsIGJveD1ib3guUk9VTkRFRAogICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIHNlbGYuY29uc29sZS5wcmludChQYW5lbCgKICAgICAgICAgICAgICAgICAgICAiW2JvbGQgY3lhbl1QcmVzcyBbeWVsbG93XUNUUkwgKyBDWy95ZWxsb3ddIHRvIHN0b3Agc2VydmVyLlsvYm9sZCBjeWFuXSIsCiAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImN5YW4iLCBib3g9Ym94LlJPVU5ERUQKICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICBodHRwZC5zZXJ2ZV9mb3JldmVyKCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuY29uc29sZS5wcmludChmIltib2xkIHJlZF1TZXJ2ZXIgZXJyb3I6IHtlfVsvYm9sZCByZWRdIikKCiAgICBkZWYgcnVuKHNlbGYpOgogICAgICAgIHNlbGYuY2xlYXJfc2NyZWVuKCkKICAgICAgICBzZWxmLmRpc3BsYXlfYmFubmVyKCkKCiAgICAgICAgaWYgbm90IHNlbGYuY3JlYXRlX2FjY291bnQoKToKICAgICAgICAgICAgc2VsZi5jb25zb2xlLnByaW50KFBhbmVsKCJbYm9sZCByZWRdRmFpbGVkIHRvIGNyZWF0ZSB0ZW1wIGVtYWlsIVsvYm9sZCByZWRdIiwgc3R5bGU9InJlZCIsIGJveD1ib3guUk9VTkRFRCkpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNob3duX21lc3NhZ2Vfb25jZSA9IEZhbHNlCiAgICAgICAgICAgIHdpdGggTGl2ZShhdXRvX3JlZnJlc2g9RmFsc2UpIGFzIGxpdmU6CiAgICAgICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzID0gc2VsZi5jaGVja19pbmJveCgpCiAgICAgICAgICAgICAgICAgICAgbmV3X21lc3NhZ2VzID0gW21zZyBmb3IgbXNnIGluIG1lc3NhZ2VzIGlmIG1zZ1siaWQiXSBub3QgaW4gc2VsZi5zZWVuX2lkc10KCiAgICAgICAgICAgICAgICAgICAgaWYgbmV3X21lc3NhZ2VzOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyX3NjcmVlbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzcGxheV9iYW5uZXIoKQogICAgICAgICAgICAgICAgICAgICAgICBpbmJveF90YWJsZSA9IHNlbGYuY3JlYXRlX2luYm94X3RhYmxlKG1lc3NhZ2VzKQogICAgICAgICAgICAgICAgICAgICAgICBsaXZlLnVwZGF0ZShpbmJveF90YWJsZSwgcmVmcmVzaD1UcnVlKQoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIG1zZyBpbiBuZXdfbWVzc2FnZXM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlZW5faWRzLmFkZChtc2dbImlkIl0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoIlxuIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxfbXNnID0gc2VsZi5yZWFkX2VtYWlsKG1zZ1siaWQiXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzcGxheV9lbWFpbChmdWxsX21zZykKCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNob3duX21lc3NhZ2Vfb25jZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25zb2xlLnByaW50KFBhbmVsKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIltib2xkIGN5YW5dUHJlc3MgW3llbGxvd11DVFJMICsgQ1sveWVsbG93XSB0byBzdG9wIHRoZSBhcHBsaWNhdGlvbi5bL2JvbGQgY3lhbl0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImN5YW4iLCBib3g9Ym94LlJPVU5ERUQKICAgICAgICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd25fbWVzc2FnZV9vbmNlID0gVHJ1ZQoKICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCgogICAgICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgICAgICAgc2VsZi5jbGVhcl9zY3JlZW4oKQogICAgICAgICAgICBzZWxmLmNvbnNvbGUucHJpbnQoUGFuZWwoCiAgICAgICAgICAgICAgICAiW2JvbGQgeWVsbG93XVRoYW5rIHlvdSBmb3IgdXNpbmcgWFRlbXBtYWlsIGJ5IE1yLlghWy9ib2xkIHllbGxvd10iLAogICAgICAgICAgICAgICAgc3R5bGU9InllbGxvdyIsIGJveD1ib3guUk9VTkRFRAogICAgICAgICAgICApKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHZpZXdlciA9IFRlbXBNYWlsVmlld2VyKCkKICAgIHZpZXdlci5ydW4oKQ==').decode('utf-8'))
